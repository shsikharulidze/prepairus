<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PrePair Profile</title>
  
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  
  <!-- Shared Styles -->
  <link rel="stylesheet" href="shared.css">
  
  <!-- Supabase Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="js/config.js"></script>
  <script src="js/supabase-client.js"></script>
  <script src="shared.js"></script>
  <script src="prepair.js"></script>
</head>
<body id="edit-profile-page">
  <div class="app-container">
    
    <!-- Sidebar Navigation -->
    <aside class="sidebar" aria-label="Main Navigation">
      <div class="sidebar-brand">
        <span class="wordmark">PrePair</span>
      </div>
      
      <nav class="sidebar-nav">
        <ul>
          <li><a href="dashboard.html">Dashboard</a></li>
          <li class="active"><a href="edit-profile.html">Edit Profile</a></li>
          <li><a href="applications.html">Applications</a></li>
          <li><a href="help.html">Help</a></li>
          <li><a href="settings.html">Settings</a></li>
          <li><button type="button" id="signout-btn" role="button">Sign Out</button></li>
        </ul>
      </nav>
    </aside>

    <!-- Main Content Area -->
    <main class="main-content">
      
      <!-- Profile Form -->
      <section class="profile-form-section">
        <div class="container">
          <div class="card profile-form-card">
            <h3>Edit Profile</h3>
            <p class="muted">Update your personal information and preferences.</p>

            <!-- Form Messages -->
            <div id="form-messages" class="form-messages">
              <div id="success-message" class="message success" style="display: none;" role="alert" aria-live="polite"></div>
              <div id="error-message" class="message error" style="display: none;" role="alert" aria-live="assertive"></div>
            </div>

            <form id="profile-form">
              
              <!-- Personal Information -->
              <div class="form-section">
                <h4>Personal Information</h4>
                
                <div class="form-row">
                  <div class="form-group">
                    <label for="first-name">First Name *</label>
                    <input type="text" id="first-name" name="name" required>
                  </div>
                  
                  <div class="form-group">
                    <label for="last-name">Last Name *</label>
                    <input type="text" id="last-name" name="surname" required>
                  </div>
                </div>

                <div class="form-group">
                  <label for="birthday">Birthday <span class="optional">(optional)</span></label>
                  <input type="date" id="birthday" name="birthday">
                </div>

                <div class="form-group">
                  <label for="nationality">Nationality <span class="optional">(optional)</span></label>
                  <input type="text" id="nationality" name="nationality" placeholder="e.g., American, Canadian, etc.">
                </div>
              </div>

              <!-- Academic Information -->
              <div class="form-section">
                <h4>Academic Information</h4>
                
                <div class="form-group">
                  <label for="university">University</label>
                  <input type="text" id="university" name="university" value="Fordham University" placeholder="Fordham University">
                </div>

                <div class="form-row">
                  <div class="form-group">
                    <label for="major">Major</label>
                    <input type="text" id="major" name="major" placeholder="e.g., Computer Science, Business, etc.">
                  </div>
                  
                  <div class="form-group">
                    <label for="graduation-year">Graduation Year</label>
                    <select id="graduation-year" name="graduation_year">
                      <option value="">Select year</option>
                      <option value="2024">2024</option>
                      <option value="2025">2025</option>
                      <option value="2026">2026</option>
                      <option value="2027">2027</option>
                      <option value="2028">2028</option>
                      <option value="2029">2029</option>
                    </select>
                  </div>
                </div>

                <div class="form-group">
                  <label for="campus">Campus <span class="optional">(optional)</span></label>
                  <select id="campus" name="campus">
                    <option value="">Select campus</option>
                    <option value="Rose Hill">Rose Hill (Bronx)</option>
                    <option value="Lincoln Center">Lincoln Center (Manhattan)</option>
                    <option value="Westchester">Westchester</option>
                    <option value="London">London</option>
                  </select>
                </div>
              </div>

              <!-- Form Actions -->
              <div class="form-actions">
                <button type="button" class="btn ghost" onclick="window.location.href='dashboard.html'">Cancel</button>
                <button type="submit" class="btn" id="save-btn">Save Profile</button>
              </div>

            </form>
          </div>
        </div>
      </section>

    </main>
  </div>

  <style>
    /* Dashboard Layout */
    .app-container {
      display: grid;
      grid-template-columns: 240px 1fr;
      min-height: 100vh;
      background-color: var(--bg);
    }

    /* Sidebar Styles */
    .sidebar {
      background-color: var(--card);
      border-right: 1px solid var(--border);
      padding: 24px 0;
      box-shadow: var(--shadow);
    }

    .sidebar-brand {
      padding: 0 24px 32px;
      border-bottom: 1px solid var(--border);
    }

    .sidebar-brand .wordmark {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--text);
    }

    .sidebar-nav {
      padding-top: 24px;
    }

    .sidebar-nav ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .sidebar-nav li {
      margin: 0;
    }

    .sidebar-nav a,
    .sidebar-nav button {
      display: block;
      padding: 12px 24px;
      color: var(--text);
      text-decoration: none;
      font-family: 'Inter', sans-serif;
      font-weight: 500;
      border: none;
      background: none;
      width: 100%;
      text-align: left;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .sidebar-nav a:hover,
    .sidebar-nav button:hover {
      background-color: var(--sage);
      transform: translateY(-1px);
    }

    .sidebar-nav .active a {
      background-color: var(--sage);
      font-weight: 600;
    }

    /* Main Content */
    .main-content {
      padding: 32px;
      overflow-y: auto;
    }

    .container {
      max-width: 800px;
      margin: 0 auto;
    }

    /* Profile Form */
    .profile-form-card {
      padding: 40px;
    }

    .profile-form-card h3 {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 2rem;
      margin-bottom: 8px;
    }

    .profile-form-card > p {
      margin-bottom: 32px;
    }

    .form-section {
      margin-bottom: 40px;
    }

    .form-section h4 {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 1.25rem;
      margin-bottom: 20px;
      padding-bottom: 8px;
      border-bottom: 1px solid var(--border);
    }

    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
    }

    .form-group {
      margin-bottom: 24px;
    }

    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: var(--text);
      font-family: 'Inter', sans-serif;
      font-size: 0.9rem;
    }

    .optional {
      color: var(--muted);
      font-weight: 400;
      font-size: 0.85rem;
    }

    .form-group input,
    .form-group select {
      width: 100%;
      padding: 12px 16px;
      border: 2px solid var(--border);
      border-radius: 8px;
      font-family: 'Inter', sans-serif;
      font-size: 1rem;
      transition: border-color 0.2s ease;
      background-color: white;
      box-sizing: border-box;
    }

    .form-group input:focus,
    .form-group select:focus {
      outline: none;
      border-color: var(--text);
    }

    .form-group input.error {
      border-color: #dc3545;
      background-color: #fff5f5;
    }

    /* Form Messages */
    .form-messages {
      margin-bottom: 24px;
    }

    .message {
      padding: 12px 16px;
      border-radius: 8px;
      margin-bottom: 12px;
      font-weight: 500;
    }

    .message.success {
      background-color: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }

    .message.error {
      background-color: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
    }

    /* Form Actions */
    .form-actions {
      display: flex;
      gap: 16px;
      justify-content: flex-end;
      margin-top: 40px;
      padding-top: 24px;
      border-top: 1px solid var(--border);
    }

    .form-actions .btn {
      min-width: 120px;
    }

    #save-btn.loading {
      opacity: 0.7;
      cursor: not-allowed;
    }

    #save-btn.loading::after {
      content: "...";
      animation: loading 1s infinite;
    }

    @keyframes loading {
      0%, 33% { content: "."; }
      34%, 66% { content: ".."; }
      67%, 100% { content: "..."; }
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .app-container {
        grid-template-columns: 1fr;
        grid-template-rows: auto 1fr;
      }

      .sidebar {
        border-right: none;
        border-bottom: 1px solid var(--border);
      }

      .sidebar-nav ul {
        display: flex;
        overflow-x: auto;
        padding: 0 16px;
      }

      .sidebar-nav li {
        flex-shrink: 0;
      }

      .main-content {
        padding: 16px;
      }

      .profile-form-card {
        padding: 24px;
      }

      .form-row {
        grid-template-columns: 1fr;
        gap: 0;
      }

      .form-actions {
        flex-direction: column-reverse;
      }

      .form-actions .btn {
        width: 100%;
      }
    }
  </style>
</body>
</html>